language: python
python: 3.6
branches:
  only:
  - master
  - ci
  - "/^(release\\/)?v([1-9]\\d*!)?(0|[1-9]\\d*)(\\.(0|[1-9]\\d*))*((a|b|rc)(0|[1-9]\\d*))?(\\.post(0|[1-9]\\d*))?(\\.dev(0|[1-9]\\d*))?$/"
before_install:
- pip install -r requirements-ci.txt
install: pip install -e .
script: make cover
after_success: coveralls
deploy:
  provider: pypi
  skip_cleanup: true
  user: babakhani
  password:
    secure: cF5CY7UfRrfM+bBLgmWQteRd5rwu6CdD038aDNzDDlqawR4xRC421vCXmbW4A1YDtNG3RfpFRH7xCTEImswS/3X0jOgAdc1sztSVypDa6Zc2fuTneK2TM8dBdfmt0Zlf0JtY1uivd3Z3cKD6QVEtWT5zSk/ULCucUiPs2f9V1xFB0L7LuXAH9p4cyobOCoU6gKn2HcjHxI+rQ++38GnQB14onEYwZlFv7EwR+KeSLY7OCKPAzpEkAvwZLpOUFlQhVweT+pEDm4wbCu4ektr7Rv6sLTUheG9LswUYs05RdbKX1Mjs9YZQlS0Yavjikj1ykQ61bU1jGWE0uMZ2sbfk+nPB82tIKHiy3/VDRGz1McF8Fo9du/K+RlicjnI/wGQi/MAa5NLYKsSPwH8nY6wKpryLAR6NnKs3A8RA5kahsc+DCvlegSDY1iubsfUKsHzKDaz98+09Hjticm10f4YTHHoNXMkttDVb0Rf1AuLO//kbilK743ScQo0oi1hoIaXjf7sXNcqz9WsbKjGqIqg/+1FIb4dGAVkRO8CFz1Pm6sjToktK266YtJyrSjbq/Pqcsy/YwIMIU7HS7XSoWdp11PtKeId6k31kouPGOfBUOmbWV/S1/kn4utDlc4FkDzxgP2KA44UeUHoZTA5Qw29DBdzCxSFDNJJ8wU2AsFs15oY=
  on:
    tags: true
    distributions: sdist
    repo: babakhani/markdownserver
    condition: "$TRAVIS_PYTHON_VERSION = 3.6"
