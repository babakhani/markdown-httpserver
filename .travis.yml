language: python
python: 3.6
branches:
  only:
  - master
  - ci
  - "/^(release\\/)?v([1-9]\\d*!)?(0|[1-9]\\d*)(\\.(0|[1-9]\\d*))*((a|b|rc)(0|[1-9]\\d*))?(\\.post(0|[1-9]\\d*))?(\\.dev(0|[1-9]\\d*))?$/"
before_install:
- pip install -r requirements-ci.txt
install: pip install -e .
script: make cover
after_success: coveralls
deploy:
  provider: pypi
  skip_cleanup: true
  user: __token__
  password:
    secure: T1cflfyj8TLI99poLWwvz3zKRuhkMvnH+6chT7/pd/vYVTcMiH/91MFrGdpvJiK9Q42AYCuir845EgK9/L+rrkn2w2SOPkL+bM01lvgH6ZGIeQlU+zSRWiXqF0hTbfGTe6nqvYwGbpqkaNXmi7EE8YNDXEht4CTqHbKRV/Af02H62mxKOif5Diwp8wVXwFOo+cQUs4ou5Cz3tBy1njpO8Awpz5eDme/j0mt1HPLuPtUMEavPavITgZCRUDrtd5pyO7sf97Y7WdH84C51SCTI7HwcZR92FIfqydiAHJdQjczGpoZpMX8qqdK1C24enrKtfKVSbZxNGRj5yuKf4DizHhIOYoRRFcVEBfiRExWrhrWGOJmGTwMVgPkFyzKc7XN0a9Wn+Az/lqHe6iHXEGAhAL+LfJl3GOg7Pr9boj2nIrK76tRGERJFAbN4ya6uf0eNyKH+8WrdaSt4WipdXCtQJOWOg4KW4Ri7Zjs73/chIXjKs6tudNOeBWcqReULP3UGh/WttNJnA215TQ9ygHHGIY8uIZWWuqxtqvJVnqFPJlktdWKwz4odFPSD5fbUmWd1aJF0ke0d8jr3zTNS7XFCkbAf4xQXiPzX/NXeM9ylKZ58UW2urzaZor+/JRoht0Ci1CBlNthmxGN/14Iki6S6xBiWkWueuCkxDd5HcrpsWKI=
  on:
    tags: true
    distributions: sdist
    repo: babakhani/markdownserver
    condition: "$TRAVIS_PYTHON_VERSION = 3.6"
