language: python
python: 3.6
branches:
  only:
  - master
  - ci
  - "/^(release\\/)?v([1-9]\\d*!)?(0|[1-9]\\d*)(\\.(0|[1-9]\\d*))*((a|b|rc)(0|[1-9]\\d*))?(\\.post(0|[1-9]\\d*))?(\\.dev(0|[1-9]\\d*))?$/"
before_install:
- pip install -r requirements-ci.txt
install: pip install -e .
script: make cover
after_success: coveralls
deploy:
  provider: pypi
  skip_cleanup: true
  user: babakhani
  password:
    secure: hPPqg09bwrnRPu3EYXIRV8aD+X333Slds4UWUnUm6NHcvqL7sEp4uGird0kiM1+r0Enamw+XiE9HNemOme7rDUPQBhlex2xMY+Yb9LdDz4xn59QBiLgC0Z5zub3nzgmumn4voRvPFvu/uKC0Yvb2gpLqwOikPVvTbCkQdb0XOzTzL4GCtZFxC1Hpi7ynE+R0tSkAiWEf8CwWzTSWBu0nIbvPzI1U5QOO8kFkMBGg504ZEIC1uW9o0KpGoAEvFgi1iYHXDQ6e6jDbFD47Dzl1Z+IZ6PdOJjBvyDWJVzZ3FqVwqdhMcdg8R7C8//PUNeGfMZMuXeJeNBQfgEUJBwJdP7/B7Ot6YkmuWfT1AoZ8+tOjxilIVfBIg3LPt8EcW6x+/n2Xr3S1pM+k5nRfzCEHrDWKhNFhMh8YbhFVfkpqjUqmr9dMltw6xJt4Q/b0hfhvHVSY4eRwA3JebvXfx84r5xr5QBGpJxAaNKjrnLWSmn9GdBx5r5P/LniHujQbvhkwjBqfYu52C8s19g1KRWIv6V5ks33w2ubfPzad36QK/T2qAH/G3mAIrR312+qBweH1blDvF9bmhoZ57Txeopbb1/GX+cKBcddOUDlrKXQBo33PylPOsKw6HRdR8DM74i6dkEoQIIGradks6gSJS41IqzxL00jqNFgOJ+ATAm9Xhbg=
  on:
    tags: true
    distributions: sdist
    repo: babakhani/markdownserver
    condition: "$TRAVIS_PYTHON_VERSION = 3.6"
